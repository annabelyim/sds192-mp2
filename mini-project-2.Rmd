---
title: "mini-project-2"
author: "Kiara Correa Acosta, Annabel Yim, Syrine Matoussi"
date: "March 8, 2019"
output:
  html_document:
    code_folding: hide
---

```{r, message = FALSE, warning = FALSE, include=FALSE, echo = TRUE}
library(tidyverse)
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")
```

```{r warning = FALSE, echo = TRUE}
elections_florida <- 
  house_elections %>%
  filter(state == "FL") %>%
  select(fec_id, candidate_name, party, general_votes, ge_winner) 

candidates_florida <- 
  candidates %>%
  filter(cand_office_state == "FL", cand_election_yr >= 2011 & cand_election_yr <= 2012) %>%
  select(cand_id, cand_election_yr, cand_office_state, cand_office_district)

candidates_elections_florida <- 
  merge(elections_florida, candidates_florida, by.x="fec_id", by.y="cand_id") %>%
  filter(ge_winner == "W") 

```

```{r warning = FALSE, echo = TRUE}
committees_florida <-
  committees %>%
  select(cmte_id, cmte_name)

contributions_florida <-
  contributions %>% 
  filter(transaction_type != "24A") %>%
  select(cmte_id, transaction_type, name, transaction_amt, cand_id) 

committees_contributions_florida <- committees_florida %>%
  full_join(contributions_florida, by = "cmte_id") %>%
  group_by(cand_id) %>%
  summarize(total_transaction = sum(transaction_amt))
```

```{r warning = FALSE, echo = TRUE}
combined_candidates_contributions <-
  merge(candidates_elections_florida, committees_contributions_florida, by.x="fec_id", by.y="cand_id") %>%
  group_by(party) %>%
  summarize(num_districts_won = n(), 
            total_transaction_per_party = sum(total_transaction))
```

combined_candidates_contributions is the data fram that we will probably use to graph things. 